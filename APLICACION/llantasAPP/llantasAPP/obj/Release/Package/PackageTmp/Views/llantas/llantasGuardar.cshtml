@{
    ViewBag.Title = "llantasGuardar";
    Layout = null;
}

@{ 
    //LENGUAJE DE SERVIDOR C#
    List<llantasAPP.Models.edicionLlantas.llantas_Rota> lisRotadas = ViewBag.rotadas;
    List<llantasAPP.Models.edicionLlantas.llantas_Monta> lisMontadas = ViewBag.montadas;
    List<llantasAPP.Models.edicionLlantas.llantas_Desmonta> lisRemove = ViewBag.removidas;
    List<llantasAPP.Models.edicionLlantas.llantas_Monta> lisMuestras = ViewBag.muestreos;
    List<llantasAPP.Models.edicionLlantas.llantas_Sentidos> lisSentidos = ViewBag.sentidos;
    int task = 0;
}
<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>

<div class="container">
    <div class="row">
        <div class="col">
            <div class="row">
                <img class="centrado" src="/Content/medios/taskSuccess.png" />
            </div>
            <div class="row">
                <h4 class="centrado">Transacción terminada</h4>
            </div>
        </div>
    </div>
    <div class="row">
        <ul id="listaResultados" class="list-unstyled">
            <!--LLANTAS ROTADAS-->
            @if (lisRotadas.Count > 0)
            {
                task = 1;
                <li class="media">
                    <img class="mr-3 img_respuestaHead" src="/Content/medios/tires_rotate.png" />
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Llantas Rotadas</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Llanta</th>
                                        <th>Grupo</th>
                                        <th>Pos Ini </th>
                                        <th>Pos Fin</th>
                                        <th>Sentido</th>
                                        <th>Estado T</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var llanta in lisRotadas)//carga de rotadas
                                    {
                                        <tr>
                                            <td>@llanta.par_llanta</td>
                                            <td>@llanta.par_grupo</td>
                                            <td>@llanta.par_posicion_ini</td>
                                            <td>@llanta.par_posicion_fin</td>
                                            <td>
                                                @{
                                        switch (llanta.par_sentido)
                                        {
                                            case 0:
                                                    <span>IZQ -> DER</span>
                                                break;
                                            case 1:
                                                    <span>DER -> IZQ</span>
                                                break;
                                        }
                                                }

                                            </td>
                                            <td>
                                                @{
                                        string respuestaTransac = llanta.response[0];
                                        switch (respuestaTransac)
                                        {
                                            case "1":
                                                    <img src="/Content/medios/success.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                            case "0":
                                                    <img src="/Content/medios/error_label.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                        }
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            }
            <!--LLANTAS MONTADAS-->
            @if (lisMontadas.Count > 0)
            {
                task = 1;
                <li class="media">
                    <img class="mr-3 img_respuestaHead" src="/Content/medios/tires_mont.png" />
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Llantas Montadas</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Llanta</th>
                                        <th>Grupo</th>
                                        <th>Posición</th>
                                        <th>Sentido</th>
                                        <th>Estado T</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var llanta in lisMontadas)
                                    {
                                        <tr>
                                            <td>@llanta.par_llanta_e</td>
                                            <td>@llanta.par_grupo_e</td>
                                            <td>@llanta.par_posicion_e</td>
                                            <td>
                                                @{
                                        switch (llanta.par_sentido)
                                        {
                                            case 0:
                                                    <span>IZQ -> DER</span>
                                                break;
                                            case 1:
                                                    <span>DER -> IZQ</span>
                                                break;
                                        }
                                                }

                                            </td>
                                            <td>
                                                @{
                                        string respuestaTransac = llanta.response[0];
                                        switch (respuestaTransac)
                                        {
                                            case "1":
                                                    <img src="/Content/medios/success.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                            case "0":
                                                    <img src="/Content/medios/error_label.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                        }
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>

            }
            <!--LLANTAS DESMONTADAS-->
            @if (lisRemove.Count > 0)
            {
                task = 1;
                <li class="media">
                    <img class="mr-3 img_respuestaHead" src="/Content/medios/tires_remove.png" />
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Llantas Removidas</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Llanta</th>
                                        <th>Grupo</th>
                                        <th>Posición</th>
                                        <th>Estado T</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var llanta in lisRemove)
                                    {
                                        <tr>
                                            <td>@llanta.par_llanta_e</td>
                                            <td>@llanta.par_grupo_e</td>
                                            <td>@llanta.par_posicion_e</td>
                                            <td>
                                                @{
                                        string respuestaTransac = llanta.response[0];
                                        switch (respuestaTransac)
                                        {
                                            case "1":
                                                    <img src="/Content/medios/success.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                            case "0":
                                                    <img src="/Content/medios/error_label.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                        }
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>

            }
            <!--MUESTREOS-->
            @if (lisMuestras.Count > 0)
            {
                task = 1;
                <li class="media">
                    <img class="mr-3 img_respuestaHead" src="/Content/medios/tires_test.png" />
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Muestreos Realizados</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Llanta</th>
                                        <th>Grupo</th>
                                        <th>Posición</th>
                                        <th>Estado T</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var llanta in lisMuestras)
                                    {
                                        <tr>
                                            <td>@llanta.par_llanta_e</td>
                                            <td>@llanta.par_grupo_e</td>
                                            <td>@llanta.par_posicion_e</td>
                                            <td>
                                                @{
                                        string respuestaTransac = llanta.response[0];
                                        switch (respuestaTransac)
                                        {
                                            case "1":
                                                    <img src="/Content/medios/success.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                            case "0":
                                                    <img src="/Content/medios/error_label.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                        }
                                                }
                                            </td>
                                        </tr>
                                    }

                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>     
            }
            <!--SENTIDOS-->
            @if (lisSentidos.Count > 0)
            {
                task = 1;
                <li class="media">
                    <img class="mr-3 img_respuestaHead" src="/Content/medios/tires_Orientation.png" />
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Cambio de Sentidos</h5>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Llanta</th>
                                        <th>Sent. Ini</th>
                                        <th>Sent. Fin</th>
                                        <th>Estado T</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var llanta in lisSentidos)
                                    {
                                        <tr>
                                            <td>@llanta.par_llanta</td>
                                            <td>
                                                @{
                                        switch (llanta.par_sentido_Ini)
                                        {
                                            case 0:
                                                    <span>Der - Izq (<=)</span>
                                                break;
                                            case 1:
                                                    <span>Izq - Der  (=>)</span>
                                                break;
                                        }
                                                }
                                            </td>
                                            <td>
                                                @{
                                        switch (llanta.par_sentido_Fin)
                                        {
                                            case 0:
                                                    <span>Der - Izq (<=)</span>
                                                break;
                                            case 1:
                                                    <span>Izq - Der  (=>)</span>
                                                break;
                                        }
                                                }
                                            </td>
                                            <td>
                                                @{
                                        string respuestaTransac = llanta.response[0];
                                        switch (respuestaTransac)
                                        {
                                            case "1":
                                                    <img src="/Content/medios/success.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                            case "0":
                                                    <img src="/Content/medios/error_label.png" class="imgResponse" data-toggle="tooltip" data-placement="right" title="@llanta.response[1]" />
                                                break;
                                        }
                                                }
                                            </td>
                                        </tr>
                                    }

                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>     
            }
            @if (task == 0)
            {
                <li class="media" style="text-align: center">
                    <div class="media-body">
                        <h5 class="mt-0 mb-1">Tareas realizadas</h5>
                        <div class="table-responsive">
                            <p class="font-weight-bold Text_cero">0</p>
                        </div>
                    </div>
                </li>
            }
        </ul>
        <span class="timeTransac" style="bottom: 0; position: absolute; right: 0;">Tiempo de transacción: @ViewBag.tiempoProceso Segundos</span>
    </div>
    <div class="row" style="display: block;">
        <div class="col colbtnSave">
            <a class="btn btn-primary btn-lg btn-block" href="/">Aceptar</a>
        </div>
    </div>
</div>
